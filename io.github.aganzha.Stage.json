{
   "app-id": "io.github.aganzha.Stage",
   "runtime": "org.gnome.Platform",
   "runtime-version": "47",
   "sdk": "org.gnome.Sdk",
   "sdk-extensions": ["org.freedesktop.Sdk.Extension.rust-stable"],
   "command": "stage",
   "finish-args": [
      "--filesystem=home",
      "--share=ipc",
      "--share=network",
      "--socket=fallback-x11",
      "--socket=wayland",
      "--socket=ssh-auth",
      "--socket=gpg-agent",
      "--device=dri"
   ],
   "build-options": {
      "append-path": "/usr/lib/sdk/rust-stable/bin"
   },
   "modules": [{
      "name": "stage",
      "buildsystem": "simple",
      "build-options": {
         "build-args": [
            "--share=network"
         ],
         "env": {
            "CARGO_HOME": "/run/build/stage/cargo"
         }
      },
      "build-commands": [
         "cargo fetch --manifest-path Cargo.toml --offline --verbose",
         "cargo build --release --verbose --offline",
         "source ./install.sh"
      ],
      "sources": [
         {
            "type": "git",
            "url": "https://github.com/aganzha/stage.git",
            "tag": "0.1.3",
            "dest": "."
         },
         {
            "type": "shell",
            "commands": [
               "cargo vendor cargo/vendor/"
            ]
         },
         {
            "type": "inline",
            "contents": "[source.vendored-sources]\ndirectory = \"cargo/vendor\"\n\n[source.crates-io]\nreplace-with = \"vendored-sources\"\n",
            "dest": "cargo",
            "dest-filename": "config"
         }
      ]
   }]
}
