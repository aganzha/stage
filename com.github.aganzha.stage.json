{
   "app-id": "com.github.aganzha.stage",
   "runtime": "org.gnome.Platform",
   "runtime-version": "45",
   "sdk": "org.gnome.Sdk",
   "sdk-extensions": ["org.freedesktop.Sdk.Extension.rust-stable"],
   "command": "stage",
   "finish-args": [
      "--filesystem=home",
      "--share=ipc",
      "--share=network",
      "--socket=fallback-x11",
      "--socket=wayland",
      "--socket=ssh-auth",
      "--socket=gpg-agent",
      "--device=dri"
   ],
   "build-options": {
      "append-path": "/usr/lib/sdk/rust-stable/bin"
   },
   "modules": [{
      "name": "stage",
      "buildsystem": "simple",
      "build-options": {
         "env": {
            "CARGO_HOME": "/run/build/stage/cargo"
         }
      },
      "build-commands": [
         "cargo fetch --manifest-path Cargo.toml --verbose",
         "cargo build --release --verbose",
         "install -Dm755 ./target/debug/stage -t /app/bin/",
         "install -Dm744 ./target/debug/gschemas.compiled -t /app/bin/"
      ],
      "sources": [{
         "type": "dir",
         "path": "."
      },
                  "cargo-sources.json"
                 ]
   }]
}
