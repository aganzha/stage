inconsistency. when stage, git op is calling from Status.
when commit, it must also be called from status!


while commit both staged and unstaged rendered views become obsolete.
why unstaged become obsolete? no. no need to update them.
it is just need to kill all staged changes!


lets say for now, that commit is always successfull.
it need to kill both in status, cause theyl become obsolete!

TODO: mark region not for every line, but for region!!! with marks, probably

DONE CRITICAL: expand file. collapse it. expand again - no color

ok, tags are always removed if view is dirty. hmm. lets sey its ok, for now

in View render replace ifs withsingle match with destructuring view

BUG: in magit, when there are only staged or unstaged - other title is not shown.
     so there are no jumps when staging single file.
     just staged and understaged title is replaced. its nice
     
BUG: added or removed ampty lines. it need to detect them visually (no line - no background now)
Write everything to logs!
BUG: empty lines in the end of textview are still accumulating
BUG: sometimes cursor jumps to first staged file, because it is in eof
     lets perhaps pass parameter to choose cursor. eg enum like AfterRender, AfterExpand etc

lfs support. sparse checkout

Cursor become broken just on second file :(
Handle pressing TAB inside line


BUG: Tags are accumulating!
drug racing exists )) views of deleted hunks are still there.
perhaps just skip rendering diff via dirty flag? it still be there collapsed.
or empty while other diff become rendered. hm.

every view should render every time! on every call!
it is OK to call render, cause nothing will blink, cause everything is on its place!

so, here is the problem - one thread pushes th changed and another diff is rerendered.
it need to separate it to different renders of individual diff!

STAGING LINE INSIDE HUNK (STAGING HUNK MUST BE THE SAME)
1. after staging 1 hunk, other hunk headers changed!
   so all hunks must be rerenderred!. but how to i know them?
   headers are changed??? so what? it need just to render file stupid!
   The file will remain expanded and on the same line.
   All other hunkns then what???
   old_hunks: line_no: 5, a c, line_no: 10, na nc.
   is it need to kill everything inside file (as it being collapsed)????
   probably yes. because there are no way to match old views - hunk headers,
   are changed. even hunk is the same.
   lets try to kill everuthing inside file.

   !!!!!!!!!!!!for future and clarity - next hunk become active and current in magit, when prev hunk stag

ed
   !!!!!!!!!!!!for future and clarity - in magit when staging hunk staged FILES are not expanded.
   (hunks are expanded by default)
   - whats get applied???
- where is this diff stored???


- refactor cursor to every view, by selecting actual view.
do not call render on everything


- collapse when press tab on line? YES, please


- open with no diff in files. works weird

- BUG when put mouse in the end of line it does not highlighted
- put symbolic expand tag/href to expand regions with mouse

-- HUGHLIGHT for pgup/pgdown doesn not work
- put label with current repo name (relative to path the app is started)
- try to replace &mut dyn RecursiveViewContainer with type alias

- adwaita ToolbarView
- popup widnwow from current line (commit)

- open another repo in file choose dialog
- open repo under other user causeing error! handle it!

- .gitignore does not counted in gitlib2 !!!! flags : Status(IGNORED)

op
- in parallel thread, go to the source file, while read hunks and put whole file in tree sitter,
make a syntax, highlight it and put into the diff. while insert line into the buffer, paint it with tags
by the tree sitter structure
- after push add text link to mr in gitlab and github!
